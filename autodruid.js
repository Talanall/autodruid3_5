on("ready", function () {
	        log(`-=> autodruid3_5 v0.1 <=-`);
}); 
on("add:character", function(obj) {
    // If there aren't any ability objects to grab, then we're probably in the middle of a sandbox spin-up
    if (findObjs({  _type: "ability"}).length === 0)
        return;

    var abil = findObjs({  _type: "ability", _characterid: obj.id});
    if (abil.length === 0)  // Only create the abilities if the character doesn't have any
    {
  // We build menus and UI
    	createObj("ability", {name:"WildshapeFormsMain", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (Main Menu) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Sub-Menus:=[A through D](~WildShape|WildshapeFormsA-D) \n [E through G](~WildShape|WildshapeFormsE-G) \n [H through R](~WildShape|WildshapeFormsH-R} \n [S through T](~WildShape|WildshapeFormsS-T) \n [U through Z](~WildShape|WildshapeFormsU-Z) \n [Combat Settings](~Wildshape|CombatSettingsMenu)}}", istokenaction: false});
    	createObj("ability", {name:"CombatSettingsMenu", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape (@{selected|Form} Form) (Combat Settings)}}{{Current \n Physical \n Abilities:=**Str** @{selected|Str} (@{selected|StrMod}), \n **Dex** @{selected|Dex} (@{selected|DexMod}), \n **Con** @{selected|Con} (@{selected|ConMod}) }}{{Refresh:=[Go](~Wildshape|CombatSettingsMenu)}}{{Charge:=+@{selected|ChargeAC} atk, -@{selected|ChargeAC} AC \n [Go](!setattr --charid @{selected|character_id} --ChargeAC|2) [No](!setattr --charid @{selected|character_id} --ChargeAC|0)}}{{Combat Expertise:=-@{selected|CombatExpertiseSetting} atk, +@{selected|CombatExpertiseSetting} AC \n [Set](~Wildshape|SetCombatExpertise) [Clear](!setattr --charid @{selected|character_id} --CombatExpertiseSetting|0)}}{{Dodging:=@{selected|DodgeTarget} [Set](~Wildshape|WildshapeSetDodge[[@{selected|DodgeFeat}*[[{{@{selected|DexMod},0}>1}]]]]) [Clear](!setattr --charid @{selected|character_id} --DodgeTarget|)}}{{Fight Defensively:=-[[4*@{selected|FightDefensiveSetting}]] atk, +[[@{selected|FightDefensiveSetting}*2]] AC \n [Set](!setattr --charid @{selected|character_id} --FightDefensiveSetting|1) [Clear](!setattr --charid @{selected|character_id} --FightDefensiveSetting|0)}}{{Power Attack:=-@{selected|PowerAttackSetting} atk, +@{selected|PowerAttackSetting}/[[2*@{selected|PowerAttackSetting}]] dmg \n (1-/2-hand) \n [Set](!setattr --charid @{selected|character_id} --PowerAttackSetting|[[@{selected|PowerAttackFeat}*[[{{@{selected|StrMod},0}>1}]]*?&lbrace;Power Attack Setting (max @&lbrace;selected&#124;BAB&rbrace;)|0}]]) [Clear](!setattr --charid @{selected|character_id} --PowerAttackSetting|0)}}{{Total \n Defense:=can't atk, +[[4*@{selected|TotalDefenseSetting}]] AC [Set](!setattr --charid @{selected|character_id} --TotalDefenseSetting|1 --FightDefensivelySetting|0) [Clear](!setattr --charid @{selected|character_id} --TotalDefenseSetting|0)}}{{Main Menu=[Go](~Wildshape|WildshapeFormsMain)}}",istokenaction: false});
    	createObj("ability", {name:"SetCombatExpertise", characterid: obj.id, action: "!setattr --charid @{selected|character_id} --CombatExpertiseSetting|[[?{Combat Expertise (Max is Lower of @{selected|BAB} or 5)|0}*@{selected|CombatExpertiseFeat}]]", istokenaction: false});
    	createObj("ability", {name:"WildshapeFormsA-D", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (A through D) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{Main Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel4}{Ape:=[Change](~Wildshape|ApeSetup) [Claws](~Wildshape|Atk-ApeClaws) [Full Attack](~Wildshape|Atk-ApeFull)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel5}{Dire Ape:=[Change](~Wildshape|DireApeSetup) [Claws](~Wildshape|Atk-DireApeClaws) [Full Attack](~Wildshape|Atk-DireApeFull)}}{@{selected|WildshapeLarge}@{selected|WildshapePlant}@{selected|WildshapeLevel4}{Assassin Vine:=[Change](~Wildshape|AssassinVineSetup) [Slam](~Wildshape|Atk-AssassinVineSlam) [Constrict](~Wildshape|AssassinVineConstrict2) (grapple only)}}{@{selected|WildshapeLevel1}{Baboon:=[Change](~Wildshape|BaboonSetup) [Bite](~Wildshape|Atk-BaboonBite)}}{@{selected|WildshapeLevel1}{Badger:=[Change](~Wildshape|BadgerSetup) [Claws](~Wildshape|Atk-BadgerClaw) [Full Attack](~Wildshape|Atk-BadgerFull) [Rage Start](~Wildshape|BadgerRageStart) [Rage End](~Wildshape|BadgerRageEnd)}}{@{selected|WildshapeLevel3}{Dire Badger:=[Change](~Wildshape|DireBadgerSetup) [Claws](~Wildshape|Atk-DireBadgerClaw) [Full Attack](~Wildshape|Atk-DireBadgerFull) [Rage Start](~Wildshape|DireBadgerRageStart) [Rage End](~Wildshape|DireBadgerRageEnd)}}{@{selected|WildshapeDiminutive}@{selected|WildshapeLevel1}{Bat:=[Change](~Wildshape|BatSetup)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel4}{Dire Bat:=[Change](~Wildshape|DireBatSetup) [Bite](~Wildshape|Atk-DireBatBite)}}{@{selected|WildshapeLevel3}{Black Bear:=[Change](~Wildshape|BlackBearSetup) [Claw](~Wildshape|Atk-BearClaw) [Full Attack](~Wildshape|Atk-BearFull)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel6}{Brown Bear:=[Change](~Wildshape|BrownBearSetup) [Claw](~Wildshape|Atk-BrownBearClaw) [Full Attack](~Wildshape|Atk-BrownBearFull) [Improved Grab](~Wildshape|BrownBearGrab2)(grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel8}{Polar Bear:=[Change](~Wildshape|PolarBearSetup) [Claw](~Wildshape|Atk-BrownBearClaw) [Full Attack](~Wildshape|Atk-BrownBearFull) [Improved Grab](~Wildshape|PolarBearGrab2)(grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel12}{Dire Bear:=[Change](~Wildshape|DireBearSetup) [Claw](~Wildshape|Atk-DireBearClaw) [Full Attack](~Wildshape|Atk-DireBearFull) [Improved Grab](~Wildshape|DireBearGrab2)(grapple only)}}@{selected|WildshapeLarge}{@{selected|WildshapeLarge}@{selected|WildshapeLevel5}{Bison:=[Change](~Wildshape|BisonSetup) [Gore](~Wildshape|Atk-BisonGore)}}{@{selected|WildshapeLevel3}{Boar:=[Change](~Wildshape|BoarSetup) [Gore](~Wildshape|Atk-BoarGore) [Ferocity](~Wildshape|BoarFerocity)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel7}{Dire Boar:=[Change](~Wildshape|DireBoarSetup) [Gore](~Wildshape|Atk-DireBoarGore) [Ferocity](~Wildshape|DireBoarFerocity)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Dromedary Camel:=[Change](~Wildshape|DromedaryCamelSetup) [Bite](~Wildshape|Atk-CamelBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Bactrian Camel:=[Change](~Wildshape|BactrianCamelSetup) [Bite](~Wildshape|Atk-CamelBite)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Cat:=[Change](~Wildshape|CatSetup) [Claw](~Wildshape|Atk-CatClaw) [Full Attack](~Wildshape|Atk-CatFull)}}{@{selected|WildshapeLevel3}{Cheetah:=[Change](~Wildshape|CheetahSetup) [Bite](~Wildshape|Atk-CheetahBite) [Full Attack](~Wildshape|Atk-CheetahFull)}}{@{selected|WildshapeLevel3}{Crocodile:=[Change](~Wildshape|CrocodileSetup) [Bite](~Wildshape|Atk-Crocbite) [Tail Slap](~Wildshape|Atk-Crocslap)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel7}{Giant Crocodile:=[Change](~Wildshape|GiantCrocodileSetup) [Bite](~Wildshape|Atk-Crocbite) [Tail Slap](~Wildshape|Atk-Crocslap) [Improved Grab](~Wildshape|CrocodileGrab2)(grapple only)}}{@{selected|WildshapeLevel4}{Deinonychus:=[Change](~Wildshape|DeinonychusSetup) [Talons](~Wildshape|Atk-DeinonychusTalons) [Full Attack](~Wildshape|Atk-DeinonychusFull)[Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|DeinonychusPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0)}}{@{selected|WildshapeLevel1}{Dog:=[Change](~Wildshape|DogSetup) [Bite](~Wildshape|Atk-DogBite)}}{@{selected|WildshapeLevel2}{Riding Dog:=[Change](~Wildshape|RidingDogSetup) [Bite](~Wildshape|Atk-RidingDogBite)}}{@{selected|WildshapeLevel2}{Donkey:=[Change](~Wildshape|DonkeySetup) [Bite](~Wildshape|Atk-DonkeyBite)}}{{End&nbsp;Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Main&nbsp;Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{Current&nbsp;Form:=@{selected|Form}}}", istokenaction: false});
    	createObj("ability", {name:"WildshapeFormsE-G",characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (E through G) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{Main Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{@{selected|WildshapeLevel1}{Eagle:=[Change](~Wildshape|EagleSetup) [Talons](~Wildshape|Atk-EagleTalons) [Full Attack](~Wildshape|Atk-EagleFull)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel10}{Elasmosaurus:=[Change](~Wildshape|ElasmosaurusSetup) [Bite](~Wildshape|Atk-ElasmosaurusBite)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Small Air):=[Change](~Wildshape|SmallAirElementalSetup) [Slam](~Wildshape|Atk-AirElementalSlam) [Whirlwind](~Wildshape|AirElementalWhirlwindSmall)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Small Earth):=[Change](~Wildshape|SmallEarthElementalSetup) [Slam](~Wildshape|Atk-EarthElementalSlam) [Push](~Wildshape|EarthElementalPush)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Small Fire):=[Change](~Wildshape|SmallFireElementalSetup) [Slam](~Wildshape|Atk-FireElementalSlam) [Burn (Defensive)](~Wildshape|FireElementalBurn)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Small Water):=[Change](~Wildshape|SmallWaterElementalSetup) [Slam](~Wildshape|Atk-WaterElementalSlam) [Drench](~Wildshape|WaterElementalDrench) [Water Mastery](~Wildshape|WaterElementalWaterMastery) [Vortex](~Wildshape|WaterElementalVortexSmall)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Medium Air):=[Change](~Wildshape|MediumAirElementalSetup) [Slam](~Wildshape|Atk-AirElementalSlam) [Whirlwind](~Wildshape|AirElementalWhirlwindMedium)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Medium Earth):=[Change](~Wildshape|MediumEarthElementalSetup) [Slam](~Wildshape|Atk-EarthElementalSlam) [Push](~Wildshape|EarthElementalPush)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Medium Fire):=[Change](~Wildshape|MediumFireElementalSetup) [Slam](~Wildshape|Atk-FireElementalSlam) [Burn (Defensive)](~Wildshape|FireElementalBurn)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel4}{Elemental (Medium Water):=[Change](~Wildshape|MediumWaterElementalSetup) [Slam](~Wildshape|Atk-WaterElementalSlam) [Drench](~Wildshape|WaterElementalDrench) [Water Mastery](~Wildshape|WaterElementalWaterMastery) [Vortex](~Wildshape|WaterElementalVortexMedium)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel8}{Elemental (Large Air):=[Change](~Wildshape|LargeAirElementalSetup) [Slam](~Wildshape|Atk-AirElementalSlam) [Full Attack](~Wildshape|Atk-AirElementalFull) [Whirlwind](~Wildshape|AirElementalWhirlwindLarge)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel8}{Elemental (Large Earth):=[Change](~Wildshape|LargeEarthElementalSetup) [Slam](~Wildshape|Atk-EarthElementalSlam) [Full Attack](~Wildshape|Atk-EarthElementalFull) [Push](~Wildshape|EarthElementalPush)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel8}{Elemental (Large Fire):=[Change](~Wildshape|LargeFireElementalSetup) [Slam](~Wildshape|Atk-FireElementalSlam) [Full Attack](~Wildshape|Atk-FireElementalFull) [Burn (Defensive)](~Wildshape|FireElementalBurn)}}{@{selected|WildshapeElemental}@{selected|WildshapeLevel8}{Elemental (Large Water):=[Change](~Wildshape|LargeWaterElementalSetup) [Slam](~Wildshape|Atk-WaterElementalSlam) [Full Attack](~Wildshape|Atk-WaterElementalFull) [Drench](~Wildshape|WaterElementalDrench) [Water Mastery](~Wildshape|WaterElementalWaterMastery) [Vortex](~Wildshape|WaterElementalVortexLarge)}}{@{selected|WildshapeHugeElemental}@{selected|WildshapeLevel8}{Elemental (Huge Air):=[Change](~Wildshape|HugeAirElementalSetup) [Slam](~Wildshape|Atk-AirElementalSlam) [Full Attack](~Wildshape|Atk-AirElementalFull) [Whirlwind](~Wildshape|AirElementalWhirlwindHuge)}}{@{selected|WildshapeHugeElemental}@{selected|WildshapeLevel8}{Elemental (Huge Earth):=[Change](~Wildshape|HugeEarthElementalSetup) [Slam](~Wildshape|Atk-EarthElementalSlam) [Full Attack](~Wildshape|Atk-EarthElementalFull) [Push](~Wildshape|EarthElementalPush)}}{@{selected|WildshapeHugeElemental}@{selected|WildshapeLevel8}{Elemental (Huge Fire):=[Change](~Wildshape|HugeFireElementalSetup) [Slam](~Wildshape|Atk-FireElementalSlam) [Full Attack](~Wildshape|Atk-FireElementalFull) [Burn (Defensive)](~Wildshape|FireElementalBurn)}}{@{selected|WildshapeHugeElemental}@{selected|WildshapeLevel8}{Elemental (Huge Water):=[Change](~Wildshape|HugeWaterElementalSetup) [Slam](~Wildshape|Atk-WaterElementalSlam) [Full Attack](~Wildshape|Atk-WaterElementalFull) [Drench](~Wildshape|WaterElementalDrench) [Water Mastery](~Wildshape|WaterElementalWaterMastery) [Vortex](~Wildshape|WaterElementalVortexHuge)}}{@{selected|WildshapeLevel11}{African Elephant:=[Change](~Wildshape|AfricanElephantSetup) [Gore](~Wildshape|Atk-ElephantGore) [Full Attack](~Wildshape|Atk-ElephantFull) [Trample](~Wildshape|ElephantTrample)}}{@{selected|WildshapeLevel11}{Indian Elephant:=[Change](~Wildshape|IndianElephantSetup) [Gore](~Wildshape|Atk-ElephantGore) [Full Attack](~Wildshape|Atk-ElephantFull) [Trample](~Wildshape|ElephantTrample)}}{@{selected|WildshapePlant}@{selected|WildshapeLevel2}{Phantom Fungus:=[Change](~Wildshape|PhantomFungusSetup) [Bite](~Wildshape|Atk-PhantomFungusBite)}}{@{selected|WildshapePlant}@{selected|WildshapeLevel2}{Shrieker Fungus:=[Change](~Wildshape|ShriekerFungusSetup) [Shriek](~Wildshape|ShriekerShriek)}}{@{selected|WildshapePlant}@{selected|WildshapeLevel2}{Violet Fungus:=[Change](~Wildshape|VioletFungusSetup) [Tentacle](~Wildshape|Atk-VioletFungusTentacle) [Full Attack](~Wildshape|Atk-VioletFungusFull)}}{{End&nbsp;Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Main&nbsp;Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{Current&nbsp;Form:=@{selected|Form}}}", istokenaction: false});
    	createObj("ability", {name:"WildshapeFormsH-R", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (H through R) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{Main Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Hawk:=[Change](~Wildshape|HawkSetup) [Talons](~Wildshape|Atk-HawkTalons)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Horse (Heavy):=[Change](~Wildshape|HeavyHorseSetup) [Hoof](~Wildshape|Atk-HorseHoof) [Full Attack](~Wildshape|Atk-HorseFull)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Horse (Light):=[Change](~Wildshape|LightHorseSetup) [Hoof](~Wildshape|Atk-HorseHoof) [Full Attack](~Wildshape|Atk-HorseFull)}}{@{selected|WildshapeLevel2}{Hyena:=[Change](~Wildshape|HyenaSetup) [Bite](~Wildshape|Atk-HyenaBite)}}{@{selected|WildshapeLevel3}{Leopard:=[Change](~Wildshape|LeopardSetup) [Bite](~Wildshape|Atk-LeopardBite) [Full Attack](~Wildshape|Atk-LeopardFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|LeopardPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0) [Improved Grab](~Wildshape|LeopardGrab2)(grapple only) [Rake](~Wildshape|Atk-LeopardRake) (grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel5}{Lion:=[Change](~Wildshape|LionSetup) [Claw](~Wildshape|Atk-LionClaw) [Full Attack](~Wildshape|Atk-LionFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|LionPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0) [Improved Grab](~Wildshape|LionGrab2)(grapple only) [Rake](~Wildshape|Atk-LionRake) (grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel8}{Dire Lion:=[Change](~Wildshape|DireLionSetup) [Claw](~Wildshape|Atk-DireLionClaw) [Full Attack](~Wildshape|Atk-DireLionFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|DireLionPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0) [Improved Grab](~Wildshape|DireLionGrab2)(grapple only) [Rake](~Wildshape|Atk-DireLionRake) (grapple only)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Lizard:=[Change](~Wildshape|LizardSetup) [Bite](~Wildshape|Atk-LizardBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel8}{Megaraptor:=[Change](~Wildshape|MegaraptorSetup) [Claw](~Wildshape|Atk-MegaraptorTalons) [Full Attack](~Wildshape|Atk-DeinonychusFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|MegaraptorPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0)}}{@{selected|WildshapeLevel3}{Monitor Lizard:=[Change](~Wildshape|MonitorLizardSetup) [Bite](~Wildshape|Atk-MonitorLizardBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel4}{Manta Ray:=[Change](~Wildshape|MantaSetup) [Ram](~Wildshape|Atk-MantaRam)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Monkey:=[Change](~Wildshape|MonkeySetup) [Bite](~Wildshape|Atk-MonkeyBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Mule:=[Change](~Wildshape|MuleSetup) [Hoof](~Wildshape|Atk-MuleHoof) [Full Attack](~Wildshape|Atk-MuleFull)}}{@{selected|WildshapeLevel1}{Octopus:=[Change](~Wildshape|OctopusSetup) [Arms](~Wildshape|Atk-OctopusArms) [Full Attack](~Wildshape|Atk-OctopusFull) [Bite](~Wildshape|OctopusGrab)(grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel8}{Giant Octopus:=[Change](~Wildshape|GiantOctopusSetup) [Tentacle](~Wildshape|Atk-GiantOctopusTentacle) [Full Attack](~Wildshape|GiantOctopusFull) [Constrict](~Wildshape|GiantOctopusGrab2) (grapple only)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Owl:=[Change](~Wildshape|OwlSetup) [Talons](~Wildshape|Atk-OwlTalons)}}{@{selected|WildshapeLevel2}{Pony:=[Change](~Wildshape|PonySetup) [Hoof](~Wildshape|Atk-PonyHoof) [Full Attack](~Wildshape|Atk-PonyFull)}}{@{selected|WildshapeLevel2}{Porpoise:=[Change](~Wildshape|PorpoiseSetup) [Slam](~Wildshape|Atk-PorpoiseSlam)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Rat:=[Change](~Wildshape|RatSetup) [Bite](~Wildshape|Atk-RatBite)}}{@{selected|WildshapeLevel1}{Dire Rat:=[Change](~Wildshape|DireRatSetup) [Bite](~Wildshape|Atk-DireRatBite)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Raven:=[Change](~Wildshape|RavenSetup) [Claws](~Wildshape|Atk-RavenClaws)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel8}{Rhinocerous:=[Change](~Wildshape|RhinocerousSetup) [Gore](~Wildshape|Atk-RhinocerousGore) [Set Up Charge](!setattr --charid @{selected|character_id} --ChargeAC|2)  [Powerful Charge](~Wildshape|Atk-RhinocerousCharge) [Cancel Charge](!setattr --charid @{selected|character_id} --ChargeAC|0)}}{@{selected|WildshapeGargantuan}@{selected|WildshapeLevel18}{Roc:=[Change](~Wildshape|RocSetup) [Talon](~Wildshape|Atk-RocTalon) [Full Attack](~Wildshape|RocFull)}}{{End&nbsp;Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Main&nbsp;Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{Current&nbsp;Form:=@{selected|Form}}}", istokenaction: false});
    	createObj("ability", {name:"WildshapeFormsS-T", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (S through T) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{Main Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{@{selected|WildshapeLarge}@{selected|WildshapePlant}@{selected|WildshapeLevel8}{Shambling Mound:=[Change](~Wildshape|ShamblingMoundSetup) [Slam](~Wildshape|Atk-ShamblingMoundSlam) [Full Attack](~Wildshape|Atk-ShamblingMoundFull) [Constrict](~Wildshape|ShamblingMoundConstrict2) (grapple only)}}{@{selected|WildshapeLevel3}{Medium Shark:=[Change](~Wildshape|MediumSharkSetup) [Bite](~Wildshape|Atk-SharkBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel7}{Large Shark:=[Change](~Wildshape|LargeSharkSetup) [Bite](~Wildshape|Atk-SharkBite)}}{@{selected|WildshapeLevel10}{Huge Shark:=[Change](~Wildshape|HugeSharkSetup) [Bite](~Wildshape|Atk-SharkBite)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel18}{Dire Shark:=[Change](~Wildshape|DireSharkSetup) [Bite](~Wildshape|Atk-DireSharkBite) [Chew](~Wildshape|Atk-DireSharkGrab2) (grapple only) [Swallow Whole](~Wildshape|DireSharkSwallow) (grapple only) [Digestive Damage](~Wildshape|DireSharkSwallow2) (swallowed creatures)}}{@{selected|WildshapeLevel3}{Constrictor Snake:=[Change](~Wildshape|ConstrictorSnakeSetup) [Bite](~Wildshape|Atk-ConstrictorSnakeBite) [Constrict](~Wildshape|ConstrictorSnakeConstrict2) (grapple only)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel11}{Giant Constrictor Snake:=[Change](~Wildshape|GiantConstrictorSnakeSetup) [Bite](~Wildshape|Atk-ConstrictorSnakeBite) [Constrict](~Wildshape|ConstrictorSnakeConstrict2) (grapple only)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel6}{Huge Viper:=[Change](~Wildshape|HugeViperSetup) [Bite](~Wildshape|Atk-ViperBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Large Viper:=[Change](~Wildshape|LargeViperSetup) [Bite](~Wildshape|Atk-ViperBite)}}{@{selected|WildshapeLevel2}{Medium Viper:=[Change](~Wildshape|MediumViperSetup) [Bite](~Wildshape|Atk-ViperBite)}}{@{selected|WildshapeLevel1}{Small Viper:=[Change](~Wildshape|SmallViperSetup) [Bite](~Wildshape|Atk-ViperBite)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Tiny Viper:=[Change](~Wildshape|TinyViperSetup) [Bite](~Wildshape|Atk-ViperBite)}}{@{selected|WildshapeLevel3}{Squid:=[Change](~Wildshape|SquidSetup) [Arms](~Wildshape|Atk-SquidArms) [Full Attack](~Wildshape|Atk-SquidFull) [Bite](~Wildshape|Atk-SquidGrab)(grapple only)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel12}{Giant Squid:=[Change](~Wildshape|GiantSquidSetup) [Tentacle](~Wildshape|Atk-GiantSquidTentacle) [Full Attack](~Wildshape|GiantSquidFull) [Constrict](~Wildshape|GiantSquidConstrict2) (grapple only)}}{@{selected|WildshapeHuge}@{selected|WildshapePlant}@{selected|WildshapeLevel9}{Tendriculos:=[Change](~Wildshape|TendriculosSetup) [Bite](~Wildshape|Atk-TendriculosBite) [Full Attack](~Wildshape|TendriculosFull) [Chew](~Wildshape|TendriculosGrab2) (grapple only) [Swallow Whole](~Wildshape|TendriculosSwallowWhole) (grapple only) [Digestive Damage](~Wildshape|TendriculosSwallowWhole2) (swallowed creatures)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel6}{Tiger:=[Change](~Wildshape|TigerSetup) [Claw](~Wildshape|Atk-TigerClaw) [Full Attack](~Wildshape|Atk-TigerFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|TigerPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0) [Improved Grab (claw)](~Wildshape|TigerGrab2)(grapple only) [Improved Grab (bite)](~Wildshape|TigerGrab3)(grapple only)  [Rake](~Wildshape|Atk-TigerRake) (grapple only)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel16}{Dire Tiger:=[Change](~Wildshape|DireTigerSetup) [Claw](~Wildshape|Atk-DireTigerClaw) [Full Attack](~Wildshape|Atk-DireTigerFull) [Set Up Pounce](!setattr --charid @{selected|character_id} --ChargeAC|2) [Pounce](~Wildshape|DireTigerPounce) [Cancel Pounce](!setattr --charid @{selected|character_id} --ChargeAC|0) [Improved Grab](~Wildshape|DireTigerGrab2)(grapple only) [Rake](~Wildshape|Atk-DireTigerRake) (grapple only)}}{@{selected|WildshapeDiminutive}@{selected|WildshapeLevel1}{Toad:=[Change](~Wildshape|ToadSetup)}}{@{selected|WildshapeHuge}@{selected|WildshapePlant}@{selected|WildshapeLevel7}{Treant:=[Change](~Wildshape|TreantSetup) [Slam](~Wildshape|Atk-TreantSlam) [Full Attack](~Wildshape|TreantFull) [Trample](~Wildshape|TreantTrample)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel16}{Triceratops:=[Change](~Wildshape|TriceratopsSetup) [Gore](~Wildshape|Atk-TriceratopsGore) [Set Up Charge](!setattr --charid @{selected|character_id} --ChargeAC|2) [Charge](~Wildshape|Atk-TriceratopsCharge) [Cancel Charge](!setattr --charid @{selected|character_id} --ChargeAC|0) [Trample](~Wildshape|TriceratopsTrample)}}{@{selected|WildshapeHuge}@{selected|WildshapeLevel18}{Tyrannosaurus:=[Change](~Wildshape|TyrannosaurusSetup) [Bite](~Wildshape|Atk-TyrannosaurusBite) [Chew](~Wildshape|Atk-TyrannosaurusGrab2) (grapple only) [Swallow Whole](~Wildshape|TyrannosaurusSwallow) (grapple only) [Digestive Damage](~Wildshape|TyrannosaurusSwallow2) (swallowed creatures)}}{{End&nbsp;Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Main&nbsp;Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{Current&nbsp;Form:=@{selected|Form}}}", istokenaction: false });
    	createObj("ability", {name:"WildshapeFormsU-Z", characterid: obj.id, action: "#HideWhisper &{template:default}{{name=@{selected|character_name}: Wild Shape Options (W through Z) - (@{selected|Wildshape} remaining) (@{selected|ElementalShape} elemental shape remaining)}}{{Current Form:=@{selected|Form}}}{{Main Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{End Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel4}{Warhorse (Heavy):=[Change](~Wildshape|HeavyWarhorseSetup) [Hoof](~Wildshape|Atk-WarhorseHoof) [Full Attack](~Wildshape|Atk-WarhorseFull)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel3}{Warhorse (Light):=[Change](~Wildshape|LightWarhorseSetup) [Hoof](~Wildshape|Atk-WarhorseHoof) [Full Attack](~Wildshape|Atk-WarhorseFull)}}{@{selected|WildshapeLevel2}{War Pony:=[Change](~Wildshape|WarPonySetup) [Hoof](~Wildshape|Atk-WarPonyHoof) [Full Attack](~Wildshape|Atk-WarPonyFull)}}{@{selected|WildshapeTiny}@{selected|WildshapeLevel1}{Weasel:=[Change](~Wildshape|WeaselSetup) [Bite](~Wildshape|Atk-WeaselBite) [Attach](~Wildshape|WeaselAttach2))}}{@{selected|WildshapeLevel3}{Dire Weasel:=[Change](~Wildshape|DireWeaselSetup) [Bite](~Wildshape|Atk-DireWeaselBite) [Blood Drain](~Wildshape|DireWeaselAttach2))}}{@{selected|WildshapeGargantuan}@{selected|WildshapeLevel12}{Baleen Whale:=[Change](~Wildshape|BaleenWhaleSetup) [Tail Slap](~Wildshape|Atk-BaleenWhaleTailSlap)}}{@{selected|WildshapeGargantuan}@{selected|WildshapeLevel12}{Cachalot Whale:=[Change](~Wildshape|CachalotWhaleSetup) [Bite](~Wildshape|Atk-CachalotWhaleBite) [Full Attack](~Wildshape|Atk-CachalotWhaleFull)}}{@{selected|WildshapeLevel9}{Orca Whale:=[Change](~Wildshape|OrcaSetup) [Bite](~Wildshape|Atk-OrcaBite)}}{@{selected|WildshapeLevel2}{Wolf:=[Change](~Wildshape|WolfSetup) [Bite](~Wildshape|Atk-WolfBite)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel6}{Dire Wolf:=[Change](~Wildshape|DireWolfSetup) [Bite](~Wildshape|Atk-DireWolfBite)}}{@{selected|WildshapeLevel3}{Wolverine:=[Change](~Wildshape|WolverineSetup) [Claws](~Wildshape|Atk-WolverineClaw) [Full Attack](~Wildshape|Atk-WolverineFull) [Rage Start](~Wildshape|WolverineRageStart) [Rage End](~Wildshape|WolverineRageEnd)}}{@{selected|WildshapeLarge}@{selected|WildshapeLevel5}{Dire Wolverine:=[Change](~Wildshape|DireWolverineSetup) [Claws](~Wildshape|Atk-WolverineClaw) [Full Attack](~Wildshape|Atk-WolverineFull) [Rage Start](~Wildshape|DireWolverineRageStart) [Rage End](~Wildshape|DireWolverineRageEnd)}}{{End&nbsp;Wild Shape:=[Go](~Wildshape|WildshapeEnd)}}{{Main&nbsp;Menu:=[Back](~Wildshape|WildShapeFormsMain)}}{{Current&nbsp;Form:=@{selected|Form}}}", istokenaction: false})
  // Some administrative control macros
    	createObj("ability", {name:"WildshapeSetDodge0", characterid: obj.id, action: "#HideWhisper **Dodging is currently unavailable for @{selected|token_name}!** Either they don't have the Dodge feat ([[@{selected|DodgeFeat}]]), or Dex modifier is too low ([[{{@{selected|DexMod},0}>1}]]).",	istokenaction: false});
    	createObj("ability", {name:"WildshapeSetDodge1", characterid: obj.id, action: "!setattr --charid @{selected|character_id} --DodgeTarget|@{target|token_name}", istokenaction: false});
    }
});
